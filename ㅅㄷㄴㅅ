âœ… 1. DB í…Œì´ë¸” ìƒì„± (Oracle ê¸°ì¤€)
sql
ë³µì‚¬
í¸ì§‘
CREATE TABLE uploaded_file (
    id NUMBER PRIMARY KEY,
    file_name VARCHAR2(255),
    uploaded_at TIMESTAMP DEFAULT SYSTIMESTAMP
);
CREATE SEQUENCE uploaded_file_seq START WITH 1 INCREMENT BY 1;
âœ… 2. Entity í´ë˜ìŠ¤ ìƒì„±
java
ë³µì‚¬
í¸ì§‘
package com.example.upload;

import jakarta.persistence.*;
import java.time.LocalDateTime;

@Entity
public class UploadedFile {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "file_seq_gen")
    @SequenceGenerator(name = "file_seq_gen", sequenceName = "uploaded_file_seq", allocationSize = 1)
    private Long id;

    private String fileName;

    private LocalDateTime uploadedAt = LocalDateTime.now();

    // Getters and setters
}
âœ… 3. Repository ìƒì„±
java
ë³µì‚¬
í¸ì§‘
package com.example.upload;

import org.springframework.data.jpa.repository.JpaRepository;

public interface UploadedFileRepository extends JpaRepository<UploadedFile, Long> {
    UploadedFile findByFileName(String fileName);
}
âœ… 4. application.propertiesì— JPA ì„¤ì • ì¶”ê°€
properties
ë³µì‚¬
í¸ì§‘
spring.datasource.url=jdbc:oracle:thin:@localhost:1521:xe
spring.datasource.username=your_username
spring.datasource.password=your_password
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
âœ… 5. ì»¨íŠ¸ë¡¤ëŸ¬ ì—…ë¡œë“œ ë° ëª©ë¡ ì¡°íšŒ ë¡œì§ ìˆ˜ì •
ğŸ”¹ ì—…ë¡œë“œ ì‹œ DB ì €ì¥
java
ë³µì‚¬
í¸ì§‘
@Autowired
private UploadedFileRepository fileRepository;

@PostMapping("/upload")
public String handleUpload(@RequestParam("files") MultipartFile[] files,
                           HttpServletRequest request) throws IOException {
    String uploadPath = "C:/upload";
    File uploadDir = new File(uploadPath);
    if (!uploadDir.exists()) uploadDir.mkdirs();

    List<String> uploadedFileNames = new ArrayList<>();
    for (MultipartFile file : files) {
        if (!file.isEmpty()) {
            String fileName = file.getOriginalFilename();
            file.transferTo(new File(uploadPath + File.separator + fileName));
            uploadedFileNames.add(fileName);

            UploadedFile saved = new UploadedFile();
            saved.setFileName(fileName);
            fileRepository.save(saved);
        }
    }

    request.setAttribute("uploadedFiles", uploadedFileNames);
    return "upload_result";
}
ğŸ”¹ ëª©ë¡ì€ DBì—ì„œ ì¡°íšŒ
java
ë³µì‚¬
í¸ì§‘
@GetMapping("/files")
public String listFilesFromDB(HttpServletRequest request) {
    List<UploadedFile> files = fileRepository.findAll();
    request.setAttribute("fileList", files);
    return "file_list";
}
âœ… 6. JSP ìˆ˜ì • (DBì—ì„œ ì¡°íšŒí•œ ê°ì²´ ì‚¬ìš©)
file_list.jsp ìˆ˜ì •:

jsp
ë³µì‚¬
í¸ì§‘
<%@ page import="java.util.List" %>
<%@ page import="com.example.upload.UploadedFile" %>
<%
    List<UploadedFile> fileList = (List<UploadedFile>) request.getAttribute("fileList");
%>
<table border="1" cellpadding="5">
    <tr>
        <th>íŒŒì¼ëª…</th>
        <th>ì—…ë¡œë“œ ì‹œê°„</th>
        <th>ë‹¤ìš´ë¡œë“œ</th>
        <th>ì‚­ì œ</th>
    </tr>
    <% for (UploadedFile file : fileList) { %>
        <tr>
            <td><%= file.getFileName() %></td>
            <td><%= file.getUploadedAt() %></td>
            <td><a href="/download?filename=<%= file.getFileName() %>">ë‹¤ìš´ë¡œë“œ</a></td>
            <td>
                <form method="post" action="/delete">
                    <input type="hidden" name="filename" value="<%= file.getFileName() %>"/>
                    <button type="submit">ì‚­ì œ</button>
                </form>
            </td>
        </tr>
    <% } %>
</table>
âœ… 7. ì‚­ì œ ì‹œ DBì—ì„œë„ ì œê±°
java
ë³µì‚¬
í¸ì§‘
@PostMapping("/delete")
public String deleteFile(@RequestParam("filename") String fileName) {
    String uploadPath = "C:/upload";
    File file = new File(uploadPath, fileName);
    if (file.exists()) file.delete();

    UploadedFile uploaded = fileRepository.findByFileName(fileName);
    if (uploaded != null) fileRepository.delete(uploaded);

    return "redirect:/files";
}
âœ… ì™„ì„±ëœ ê¸°ëŠ¥ íë¦„
ì—…ë¡œë“œ ì‹œ: íŒŒì¼ ì €ì¥ + DB ì €ì¥

ëª©ë¡ ë³´ê¸°: DBì—ì„œ ì¡°íšŒí•˜ì—¬ í‘œì‹œ

ì‚­ì œ ì‹œ: ì‹¤ì œ íŒŒì¼ + DB ë‘˜ ë‹¤ ì œê±°

ì´ì œ DB ê¸°ë°˜ìœ¼ë¡œ íŒŒì¼ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” êµ¬ì¡°ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
ì¶”ê°€ë¡œ "ì‚¬ìš©ìë³„ íŒŒì¼ ê´€ë¦¬"ë‚˜ "íŒŒì¼ ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸°" ê°™ì€ ê¸°ëŠ¥ë„ í™•ì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì›í•˜ì‹œëŠ” ë‹¤ìŒ í™•ì¥ ë°©í–¥ì´ ìˆìœ¼ì‹¤ê¹Œìš”?







ë‚˜ì˜ ë§:
"íŒŒì¼ ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸°" ê¸°ëŠ¥ìœ¼ë¡œ í™•ì¥í•´ì¤˜
ChatGPTì˜ ë§:
ì¢‹ìŠµë‹ˆë‹¤! ì´ë²ˆì—ëŠ” ì—…ë¡œë“œëœ **ì´ë¯¸ì§€ íŒŒì¼(jpg, png ë“±)**ì— ëŒ€í•´ ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ì„ ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤.

âœ… ëª©í‘œ
íŒŒì¼ ëª©ë¡ì—ì„œ ì´ë¯¸ì§€ íŒŒì¼ì´ë©´ ì¸ë„¤ì¼ì„ í‘œì‹œ

ê·¸ ì™¸ ì¼ë°˜ íŒŒì¼ì€ ë‹¤ìš´ë¡œë“œ ë§í¬ë§Œ í‘œì‹œ

ì´ë¯¸ì§€ ê²½ë¡œëŠ” /files/image?filename=xxx.jpg ê°™ì€ URLë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •

âœ… 1. ì´ë¯¸ì§€ ì¶œë ¥ìš© Controller ì¶”ê°€
FileUploadController.javaì— ì¸ë„¤ì¼ ì¶œë ¥ìš© ë©”ì„œë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤:

java
ë³µì‚¬
í¸ì§‘
@GetMapping("/files/image")
public ResponseEntity<Resource> serveImage(@RequestParam("filename") String fileName) throws IOException {
    String uploadDir = "C:/upload";
    File file = new File(uploadDir, fileName);

    if (!file.exists()) {
        return ResponseEntity.notFound().build();
    }

    String contentType = Files.probeContentType(file.toPath());
    if (contentType == null || !contentType.startsWith("image")) {
        return ResponseEntity.status(HttpStatus.UNSUPPORTED_MEDIA_TYPE).build();
    }

    Resource resource = new InputStreamResource(new FileInputStream(file));
    return ResponseEntity.ok()
            .contentType(MediaType.parseMediaType(contentType))
            .body(resource);
}
âœ… 2. JSP íŒŒì¼ ìˆ˜ì • (file_list.jsp)
ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì¶œë ¥ ì¡°ê±´ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

jsp
ë³µì‚¬
í¸ì§‘
<%@ page import="java.util.List" %>
<%@ page import="com.example.upload.UploadedFile" %>
<%
    List<UploadedFile> fileList = (List<UploadedFile>) request.getAttribute("fileList");

    // ì¸ë„¤ì¼ë¡œ ë³´ì—¬ì¤„ í™•ì¥ì ì •ì˜
    String[] imageExtensions = {".jpg", ".jpeg", ".png", ".gif", ".bmp"};
%>
<table border="1" cellpadding="5">
    <tr>
        <th>íŒŒì¼ëª…</th>
        <th>ë¯¸ë¦¬ë³´ê¸°</th>
        <th>ë‹¤ìš´ë¡œë“œ</th>
        <th>ì‚­ì œ</th>
    </tr>
    <% for (UploadedFile file : fileList) {
        String fileName = file.getFileName().toLowerCase();
        boolean isImage = false;
        for (String ext : imageExtensions) {
            if (fileName.endsWith(ext)) {
                isImage = true;
                break;
            }
        }
    %>
    <tr>
        <td><%= file.getFileName() %></td>
        <td>
            <% if (isImage) { %>
                <img src="/files/image?filename=<%= file.getFileName() %>" width="100" height="100" />
            <% } else { %>
                (ì´ë¯¸ì§€ ì•„ë‹˜)
            <% } %>
        </td>
        <td><a href="/download?filename=<%= file.getFileName() %>">ë‹¤ìš´ë¡œë“œ</a></td>
        <td>
            <form method="post" action="/delete">
                <input type="hidden" name="filename" value="<%= file.getFileName() %>"/>
                <button type="submit">ì‚­ì œ</button>
            </form>
        </td>
    </tr>
    <% } %>
</table>
âœ… 3. í…ŒìŠ¤íŠ¸ ë°©ë²•
/ ê²½ë¡œì—ì„œ ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ (.jpg, .png, .gif ë“±)

/files ëª©ë¡ í˜ì´ì§€ì—ì„œ ì¸ë„¤ì¼ì´ ë³´ì´ëŠ”ì§€ í™•ì¸

ì´ë¯¸ì§€ê°€ ì•„ë‹Œ íŒŒì¼ì€ â€œ(ì´ë¯¸ì§€ ì•„ë‹˜)â€ìœ¼ë¡œ í‘œì‹œë¨

âœ… ì¶”ê°€ ê°œì„  ê°€ëŠ¥ í•­ëª©
ì¸ë„¤ì¼ ë¦¬ì‚¬ì´ì§• ì²˜ë¦¬ (í˜„ì¬ëŠ” ì›ë³¸ ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ê·¸ëŒ€ë¡œ ë³´ì—¬ì¤Œ)

ì´ë¯¸ì§€ í´ë¦­ ì‹œ ì›ë³¸ ë³´ê¸° or ë¼ì´íŠ¸ë°•ìŠ¤ íš¨ê³¼

ì¸ë„¤ì¼ ì „ìš© ìºì‹œ í´ë” ìƒì„± (ì„±ëŠ¥ ìµœì í™”)

ì´ì œ íŒŒì¼ ëª©ë¡ì— ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸°ê°€ í¬í•¨ëœ ì™„ì„±í˜• ì—…ë¡œë“œ ê´€ë¦¬ ê¸°ëŠ¥ì´ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.
ë‹¤ìŒìœ¼ë¡œ í™•ì¥í•˜ê³  ì‹¶ì€ ë¶€ë¶„ì´ ìˆì„ê¹Œìš”?
ì˜ˆ: ì‚¬ìš©ìë³„ íŒŒì¼ ë¶„ë¦¬ ì €ì¥, ì¸ë„¤ì¼ ìºì‹œ ì²˜ë¦¬, AJAX ì—…ë¡œë“œ ë“±